{% extends "admin/base_site.html" %}

{% block content %}
<style>
    .superset-wrapper {
        position: relative;
        width: 100%;
        height: 85vh;
        border: 1px solid #ddd;
    }
    iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
    /* ë¡œë”© ê°€ë¦¼ë§‰ */
    #loading-mask {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 10;
        font-size: 1.2em;
        color: #555;
    }
</style>

<div class="superset-wrapper" style="text-align: center; padding: 50px;">
    <h3>ğŸ”’ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ìƒˆ ì°½ì—ì„œ ì—´ì–´ì•¼ í•©ë‹ˆë‹¤.</h3>
    <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Supersetìœ¼ë¡œ ìë™ ë¡œê·¸ì¸í•˜ì—¬ ì´ë™í•©ë‹ˆë‹¤.</p>
    
    <form id="auto-login-form" 
          action="{{ superset_login_url }}?next={{ next_url }}" 
          method="POST" 
          target="_blank"> <input type="hidden" name="username" value="admin">
        <input type="hidden" name="password" value="admin">
        
        <input type="hidden" name="csrf_token" value="">
        
        <button type="submit" class="button" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px;">
            ğŸš€ Superset SQL Lab ì—´ê¸°
        </button>
    </form>
</div>

<form id="auto_login_form" 
      action="{{ superset_login_url }}" 
      method="POST" 
      target="superset_frame" 
      style="display:none;">
    
    <input type="hidden" name="csrf_token" value=""> 
    
    <input type="text" name="username" value="admin">
    <input type="password" name="password" value="admin">
    
    <input type="hidden" name="next" value="{{ next_url }}">
</form>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var form = document.getElementById('auto_login_form');
        var mask = document.getElementById('loading-mask');

        // 1ì´ˆ ë’¤ì— í¼ì„ ê°•ì œë¡œ ì œì¶œ (ìë™ ë¡œê·¸ì¸ ì‹œë„)
        setTimeout(function() {
            form.submit();
        }, 500);

        // 4ì´ˆ ë’¤ì— ë¡œë”© ê°€ë¦¼ë§‰ ì œê±° (í™”ë©´ì´ ë–´ë‹¤ê³  ê°€ì •)
        setTimeout(function() {
            mask.style.display = 'none';
        }, 4000);
    });
</script>
{% endblock %}