{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자료수집시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #f8fafc; font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; min-height: 100vh; margin: 0; }
        .navbar { background-color: #0f172a; width: 100%; }
        .btn-xs { padding: 0.1rem 0.4rem; font-size: 0.75rem; }
        /* 본문 영역이 풋터를 밀어내도록 설정 */
        main { flex: 1; width: 100%; }
        .footer { width: 100%; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark mb-4 shadow-lg">
        <div class="container-fluid px-lg-5">
            <a class="navbar-brand fw-bold" href="{% url 'dashboard' %}">
                <i class="bi bi-database-check me-2 text-info"></i>DATA COLLECTOR
            </a>
            
            {% if user.is_authenticated %}
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto">
                    {% if user.is_superuser or user.groups.all.0.name == 'Manager' %}
                    <li class="nav-item"><a class="nav-link" href="/admin/">시스템관리</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'design_list' %}">조사설계</a></li>
                    {% endif %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'collection_list' %}">자료수집</a></li>
                </ul>

                <div class="d-flex align-items-center gap-3">
                    <span class="text-white small">
                        <span class="badge bg-primary me-1">
                            {% if user.is_superuser or user.groups.all.0.name == 'Manager' %}Manager{% else %}Enumerator{% endif %}
                        </span>
                        <strong>{{ user.username }}</strong>님
                    </span>
                    <form action="{% url 'logout' %}" method="post" class="m-0">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-light btn-sm px-3">로그아웃</button>
                    </form>
                </div>
            </div>
            {% endif %}
        </div>
    </nav>

    <main class="container-fluid px-lg-5">
        {% block content %}{% endblock %}
    </main>

    <footer class="footer mt-auto py-3 bg-white border-top">
        <div class="container-fluid px-lg-5">
            <div class="row align-items-center">
                <div class="col-lg-2 col-md-12 mb-2 mb-lg-0 text-center text-lg-start">
                    <img src="{% static 'img/ocean_logo.png' %}" alt="오션정보기술" style="height: 35px; opacity: 0.8;">
                </div>
                <div class="col-lg-10 col-md-12">
                    <div class="footer-info text-center text-lg-start" style="line-height: 1.4;">
                        <div class="info-top mb-1">
                            <span class="addr small text-dark">(35203) 대전광역시 서구 만년로 68번길 15-23</span>
                            <span class="divider"></span>
                            <span class="ceo small">대표이사 <strong>이종규</strong></span>
                            <span class="divider"></span>
                            <span class="biz-num text-muted" style="font-size: 0.75rem;">사업자번호 305-81-95207</span>
                        </div>
                        <div class="info-contact mb-1" style="font-size: 0.8rem;">
                            <span class="me-3"><i class="bi bi-telephone me-1"></i>042-719-2012</span>
                            <span class="me-3"><i class="bi bi-printer me-1"></i>042-367-1452</span>
                            <a href="#" class="btn-map-sm text-primary text-decoration-none fw-bold">
                                <i class="bi bi-geo-alt-fill me-1"></i>오시는 길
                            </a>
                        </div>
                        <div class="copyright text-muted" style="font-size: 0.7rem;">
                            COPYRIGHT &copy; 2008-2024 <strong class="text-secondary">OCEAN INFORMATION TECHNOLOGY</strong> Co., Ltd. ALL RIGHTS RESERVED.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .divider { display: inline-block; width: 1px; height: 10px; background-color: #e5e7eb; margin: 0 8px; vertical-align: middle; }
        .btn-map-sm { border: 1px solid #e5e7eb; padding: 1px 8px; border-radius: 12px; background-color: #f9fafb; font-size: 0.75rem; }
    </style>
</body>
</html>