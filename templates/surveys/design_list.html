{% extends 'base.html' %}
{% block content %}
<style>
    /* ë‹¨ê³„ë³„ ë²„íŠ¼ ë””ìì¸ ìµœì í™” */
    .step-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    .btn-step { font-size: 0.85rem; padding: 10px 5px; font-weight: 600; }
    .btn-disabled { opacity: 0.5; cursor: not-allowed; }
</style>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <a href="{% url 'dashboard' %}" class="btn btn-outline-dark btn-sm me-2">
                ğŸ  í™ˆ
            </a>
            <h3 class="d-inline-block align-middle mb-0 fw-bold">í†µê³„ ì¡°ì‚¬ í†µí•© ì„¤ê³„ ì„¼í„°</h3>
        </div>
    </div>

    <div class="row">
        {% for survey in surveys %}
        <div class="col-12 mb-4">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-white py-3 border-bottom-0">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <span class="badge bg-primary mb-2">Survey ID: {{ survey.survey_code }}</span>
                            <h4 class="card-title fw-bold text-dark mb-0">{{ survey.survey_name }}</h4>
                        </div>
                        <div class="text-end">
                            <small class="text-muted d-block">ì¡°ì‚¬ì—°ë„: {{ survey.survey_year }}</small>
                            <small class="text-muted d-block">ì§„í–‰ì°¨ìˆ˜: {{ survey.survey_degree }}ì°¨</small>
                        </div>
                    </div>
                </div>
                <div class="card-body bg-light rounded-bottom p-4">
                    <h6 class="fw-bold mb-3 text-secondary"><i class="bi bi-gear-fill me-2"></i>ë‹¨ê³„ë³„ ì„¤ê³„ ë° ê´€ë¦¬ ë¡œë“œë§µ</h6>
                    
                    <div class="step-container">
                        <a href="{% url 'survey_area_design' survey.id %}" class="btn btn-outline-dark btn-step">
                            <i class="bi bi-geo-alt-fill me-1"></i>1. ê¶Œì—­ì„¤ê³„
                        </a>

                        <a href="{% url 'survey_field_design' survey.id %}" class="btn btn-outline-primary btn-step">
                            <i class="bi bi-list-columns-reverse me-1"></i>2. í•­ëª©ì„¤ê³„
                        </a>

                        <a href="{% url 'survey_roster_design' survey.id %}" class="btn btn-outline-info btn-step text-dark">
                            <i class="bi bi-people-fill me-1"></i>3. ëª…ë¶€ì„¤ê³„
                        </a>

                        <a href="{% url 'survey_assignment' survey.id %}" class="btn btn-outline-secondary btn-step">
                            <i class="bi bi-person-badge-fill me-1"></i>4. ì—…ë¬´ëŸ‰ë°°ì •
                        </a>

                        <a href="{% url 'survey_questionnaire_design' survey.id %}" class="btn btn-outline-warning btn-step text-dark">
                            <i class="bi bi-file-earmark-text-fill me-1"></i>5. ì¡°ì‚¬í‘œì„¤ê³„
                        </a>
                        
                        <a href="{% url 'survey_edit_rule_design' survey.id %}" class="btn btn-outline-danger btn-step">
                            <i class="bi bi-shield-check me-1"></i>6. ë‚´ê²€ê·œì¹™
                        </a>

                        <a href="{% url 'collection_analysis' survey.id %}" class="btn btn-outline-success btn-step fw-bold">
                            <i class="bi bi-graph-up-arrow me-1"></i>7. ìë£Œë¶„ì„
                        </a>
                    </div>   
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5 border rounded bg-white">
            <i class="bi bi-clipboard-x display-1 text-muted mb-3"></i>
            <p class="text-muted fs-5">ë“±ë¡ëœ í†µê³„ ì¡°ì‚¬ í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}